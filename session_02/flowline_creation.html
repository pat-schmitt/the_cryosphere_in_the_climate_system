
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Glacier Flowlines &#8212; VU The Cryosphere in the Climate System</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=2d5429a7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'session_02/flowline_creation';</script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="StudiKickoff: Mass balance model" href="../session_03/topic.html" />
    <link rel="prev" title="Numeric 2D grid of a glacier directory" href="numeric_domain_glacier.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
    <meta name="docbuild:last-update" content="May 05, 2025"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../welcome.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/practicals_logo.png" class="logo__image only-light" alt="VU The Cryosphere in the Climate System - Home"/>
    <script>document.write(`<img src="../_static/practicals_logo.png" class="logo__image only-dark" alt="VU The Cryosphere in the Climate System - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../welcome.html">
                    Welcome
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Setup</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../install_oggm.html">Installing OGGM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jupyter_notebooks.html">Getting started with Jupyter Notebooks</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Session 01</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../session_01/intro_oggm.html">Introduction to OGGM</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Session 02</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="topic.html">StudiKickoff: Representing glaciers in models</a></li>
<li class="toctree-l1"><a class="reference internal" href="numeric_domain_glacier.html">Numeric 2D grid of a glacier directory</a></li>

<li class="toctree-l1 current active"><a class="current reference internal" href="#">Glacier Flowlines</a></li>




</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Session 03</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../session_03/topic.html">StudiKickoff: Mass balance model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../session_03/mass_balance_model.html">Mass balance model in OGGM</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Session 04</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../session_04/topic.html">StudiKickoff: Glacier bed inversion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../session_04/bed_inversion.html">Glacier bed inversion in OGGM</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Session 05</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../session_05/topic.html">StudiKickoff: Geometry evolution models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../session_05/geometry_evolution.html">Geometry evolution models in OGGM</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Session 06</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../session_06/topic.html">StudiKickoff: Running into the future</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Session 07</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../session_07/topic.html">StudiKickoff: Hydrological output</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/pat-schmitt/the_cryosphere_in_the_climate_system" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/pat-schmitt/the_cryosphere_in_the_climate_system/edit/main/book/session_02/flowline_creation.ipynb" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/pat-schmitt/the_cryosphere_in_the_climate_system/issues/new?title=Issue%20on%20page%20%2Fsession_02/flowline_creation.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/session_02/flowline_creation.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Glacier Flowlines</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Glacier Flowlines</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#oggm-initzial-set-up">OGGM initzial set up</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#start-from-a-preprocessed-directory">Start from a preprocessed directory</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#create-elevation-band-flowlines">Create elevation band flowlines</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#glacier-mask">Glacier Mask</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#elevation-band-flowline">elevation band flowline</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#fixed-dx-elevation-band-flowline">fixed dx elevation band flowline</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#downstream-line">Downstream line</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#recap">Recap</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="glacier-flowlines">
<h1>Glacier Flowlines<a class="headerlink" href="#glacier-flowlines" title="Link to this heading">#</a></h1>
<p>OGGM’s default dynamic model is a flowline model (we’ll cover this in session 05). But before we can use this model, we need to define flowlines for our glacier. OGGM supports two types of flowlines: centerlines and elevation band flowlines.</p>
<p>In this notebook, we will focus only on elevation band flowlines, which are currently the default in OGGM. If you are curious about the differences between the two approaches, check out this <a class="reference external" href="https://tutorials.oggm.org/stable/notebooks/tutorials/elevation_bands_vs_centerlines.html">OGGM tutorial</a> or the <a class="reference external" href="https://docs.oggm.org/en/stable/flowlines.html">OGGM documentation</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># first we import the packages we need for this session</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">oggm</span><span class="w"> </span><span class="kn">import</span> <span class="n">cfg</span><span class="p">,</span> <span class="n">utils</span><span class="p">,</span> <span class="n">workflow</span><span class="p">,</span> <span class="n">tasks</span> 
</pre></div>
</div>
</div>
</div>
</section>
<section id="oggm-initzial-set-up">
<h1>OGGM initzial set up<a class="headerlink" href="#oggm-initzial-set-up" title="Link to this heading">#</a></h1>
<p>As always, we need to start by setting up the working directory.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cfg</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>

<span class="c1"># define working directory</span>
<span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;flowline_working_dir&#39;</span>
<span class="n">utils</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">reset</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># if you set reset=True, everything will be deleted and you can start from a fresh state</span>
<span class="n">cfg</span><span class="o">.</span><span class="n">PATHS</span><span class="p">[</span><span class="s1">&#39;working_dir&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">path</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-05-05 09:28:36: oggm.cfg: Reading default parameters from the OGGM `params.cfg` configuration file.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-05-05 09:28:36: oggm.cfg: Multiprocessing switched OFF according to the parameter file.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-05-05 09:28:36: oggm.cfg: Multiprocessing: using all available processors (N=8)
</pre></div>
</div>
</div>
</div>
</section>
<section id="start-from-a-preprocessed-directory">
<h1>Start from a preprocessed directory<a class="headerlink" href="#start-from-a-preprocessed-directory" title="Link to this heading">#</a></h1>
<p>Thanks to the preprocessed directories, we don’t need to start from scratch every time. We can begin with any glacier using the state we created in the last notebook, which already includes the 2D grid and DEM. For this, we select level 1 of the <a class="reference external" href="https://docs.oggm.org/en/stable/shop.html#pre-processed-directories">preprocessed directories</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># select the glacier of your choice, you can use the Glims viewer from the first session</span>
<span class="n">rgi_ids</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;RGI60-11.00897&#39;</span><span class="p">]</span>  <span class="c1"># Hintereisferner</span>

<span class="c1"># we load the outline data from the oggm cluster</span>
<span class="n">prepro_base_url_L1</span> <span class="o">=</span> <span class="s1">&#39;https://cluster.klima.uni-bremen.de/~oggm/gdirs/oggm_v1.6/L1-L2_files/elev_bands/&#39;</span>
<span class="n">gdirs</span> <span class="o">=</span> <span class="n">workflow</span><span class="o">.</span><span class="n">init_glacier_directories</span><span class="p">(</span><span class="n">rgi_ids</span><span class="p">,</span>
                                          <span class="n">from_prepro_level</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>  <span class="c1"># here we select level 1</span>
                                          <span class="n">prepro_base_url</span><span class="o">=</span><span class="n">prepro_base_url_L1</span><span class="p">,</span>
                                          <span class="n">prepro_border</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span>  <span class="c1"># could be 10, 80, 160 or 240</span>
                                         <span class="p">)</span>
<span class="n">gdir</span> <span class="o">=</span> <span class="n">gdirs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># for convenience, we define a single variable for our glacier</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-05-05 09:28:36: oggm.workflow: init_glacier_directories from prepro level 1 on 1 glaciers.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-05-05 09:28:36: oggm.workflow: Execute entity tasks [gdir_from_prepro] on 1 glaciers
</pre></div>
</div>
</div>
</div>
<div class="alert alert-warning">
    <b>Task</b>: Take a look in your glacier’s working directory. Do you recognize all the files?
</div></section>
<section id="create-elevation-band-flowlines">
<h1>Create elevation band flowlines<a class="headerlink" href="#create-elevation-band-flowlines" title="Link to this heading">#</a></h1>
<p>Before we start coding, please read <a class="reference external" href="https://docs.oggm.org/en/stable/flowlines.html#elevation-bands-flowlines">this paragraph</a> that explains how elevation band flowlines are created.</p>
<div class="alert alert-warning">
    <b>Task</b>: Can you explain how elevation bands are created in your own words?
</div><p>Your answer here:</p>
<section id="glacier-mask">
<h2>Glacier Mask<a class="headerlink" href="#glacier-mask" title="Link to this heading">#</a></h2>
<p>Now we start creating the actual elevation bands for our selected glacier. The first step is to create a glacier mask on the grid we defined earlier.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">workflow</span><span class="o">.</span><span class="n">execute_entity_task</span><span class="p">(</span><span class="n">tasks</span><span class="o">.</span><span class="n">simple_glacier_masks</span><span class="p">,</span> 
                             <span class="n">gdirs</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-05-05 09:28:37: oggm.workflow: Execute entity tasks [simple_glacier_masks] on 1 glaciers
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-05-05 09:28:37: oggm.core.gis: (RGI60-11.00897) simple_glacier_masks
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-05-05 09:28:37: oggm.core.gis: (RGI60-11.00897) process_dem
</pre></div>
</div>
</div>
</div>
<div class="alert alert-warning">
    <b>Task</b>: Have a look in your glacier's working directory. Is their a new file?
</div><p>Now you should now see a new file called <code class="docutils literal notranslate"><span class="pre">gridded_data.nc</span></code>. Let’s have a look at it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">xarray</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">xr</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">gdir</span><span class="o">.</span><span class="n">get_filepath</span><span class="p">(</span><span class="s1">&#39;gridded_data&#39;</span><span class="p">))</span>
<span class="n">ds</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1f1f1f;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
  height: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "►";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "▼";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 720kB
Dimensions:          (x: 279, y: 234)
Coordinates:
  * x                (x) float32 1kB -6.517e+03 -6.467e+03 ... 7.383e+03
  * y                (y) float32 936B 5.189e+06 5.189e+06 ... 5.177e+06
Data variables:
    topo             (y, x) float32 261kB ...
    topo_smoothed    (y, x) float32 261kB ...
    topo_valid_mask  (y, x) int8 65kB ...
    glacier_mask     (y, x) int8 65kB ...
    glacier_ext      (y, x) int8 65kB ...
Attributes:
    author:         OGGM
    author_info:    Open Global Glacier Model
    pyproj_srs:     +proj=tmerc +lat_0=0 +lon_0=10.7584 +k=0.9996 +x_0=0 +y_0...
    max_h_dem:      3691.0
    min_h_dem:      1936.0
    max_h_glacier:  3691.0
    min_h_glacier:  2431.0</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-eaad7667-df65-4236-9658-bc3e2de877da' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-eaad7667-df65-4236-9658-bc3e2de877da' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>x</span>: 279</li><li><span class='xr-has-index'>y</span>: 234</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-ec6cea9a-1b2c-41e9-aefc-c04a7f334732' class='xr-section-summary-in' type='checkbox'  checked><label for='section-ec6cea9a-1b2c-41e9-aefc-c04a7f334732' class='xr-section-summary' >Coordinates: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>-6.517e+03 -6.467e+03 ... 7.383e+03</div><input id='attrs-f4f270b9-791a-4586-878f-e06103813064' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f4f270b9-791a-4586-878f-e06103813064' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3d1237ed-ea0c-4037-829c-0ffa9a94f0b0' class='xr-var-data-in' type='checkbox'><label for='data-3d1237ed-ea0c-4037-829c-0ffa9a94f0b0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>m</dd><dt><span>long_name :</span></dt><dd>x coordinate of projection</dd><dt><span>standard_name :</span></dt><dd>projection_x_coordinate</dd></dl></div><div class='xr-var-data'><pre>array([-6517.129, -6467.129, -6417.129, ...,  7282.871,  7332.871,  7382.871],
      dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>y</span></div><div class='xr-var-dims'>(y)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>5.189e+06 5.189e+06 ... 5.177e+06</div><input id='attrs-e6bd6165-421f-4d26-a69e-eceb18833662' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e6bd6165-421f-4d26-a69e-eceb18833662' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-42bc30c4-04c7-47ff-b71d-f60e46f8e2b3' class='xr-var-data-in' type='checkbox'><label for='data-42bc30c4-04c7-47ff-b71d-f60e46f8e2b3' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>m</dd><dt><span>long_name :</span></dt><dd>y coordinate of projection</dd><dt><span>standard_name :</span></dt><dd>projection_y_coordinate</dd></dl></div><div class='xr-var-data'><pre>array([5189040.5, 5188990.5, 5188940.5, ..., 5177490.5, 5177440.5, 5177390.5],
      dtype=float32)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-82d3633c-98be-4ff3-98b3-70c6fe3e0d92' class='xr-section-summary-in' type='checkbox'  checked><label for='section-82d3633c-98be-4ff3-98b3-70c6fe3e0d92' class='xr-section-summary' >Data variables: <span>(5)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>topo</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-6de04695-f5fe-49e6-8d8a-6ca4666be231' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-6de04695-f5fe-49e6-8d8a-6ca4666be231' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-94b05fdc-0bda-4def-a0dc-0bfaad2c13fc' class='xr-var-data-in' type='checkbox'><label for='data-94b05fdc-0bda-4def-a0dc-0bfaad2c13fc' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>m</dd><dt><span>long_name :</span></dt><dd>DEM topography</dd></dl></div><div class='xr-var-data'><pre>[65286 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>topo_smoothed</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-73bc6488-c9f1-4292-b889-6ef7bb9d0ad8' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-73bc6488-c9f1-4292-b889-6ef7bb9d0ad8' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9b663d2a-7379-4dbd-8555-0a317e760915' class='xr-var-data-in' type='checkbox'><label for='data-9b663d2a-7379-4dbd-8555-0a317e760915' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>m</dd><dt><span>long_name :</span></dt><dd>DEM topography smoothed with radius: 3e+02 m</dd></dl></div><div class='xr-var-data'><pre>[65286 values with dtype=float32]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>topo_valid_mask</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>int8</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-f915968c-b377-4305-a855-e13f8c6ad37b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f915968c-b377-4305-a855-e13f8c6ad37b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-40fe5545-24d4-4914-9021-1e9a1d928c25' class='xr-var-data-in' type='checkbox'><label for='data-40fe5545-24d4-4914-9021-1e9a1d928c25' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>-</dd><dt><span>long_name :</span></dt><dd>DEM validity mask according to geotiff input (1-0)</dd></dl></div><div class='xr-var-data'><pre>[65286 values with dtype=int8]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>glacier_mask</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>int8</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-0fe8d811-d669-46d7-9124-eaf720d4f3fa' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-0fe8d811-d669-46d7-9124-eaf720d4f3fa' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-38e670a5-3660-4987-90c5-c9fb0b4dec6e' class='xr-var-data-in' type='checkbox'><label for='data-38e670a5-3660-4987-90c5-c9fb0b4dec6e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>-</dd><dt><span>long_name :</span></dt><dd>Glacier mask</dd></dl></div><div class='xr-var-data'><pre>[65286 values with dtype=int8]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>glacier_ext</span></div><div class='xr-var-dims'>(y, x)</div><div class='xr-var-dtype'>int8</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-02667aff-f1b9-4a9a-af9a-70254f671aca' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-02667aff-f1b9-4a9a-af9a-70254f671aca' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1b9d7d39-4dd0-41e0-b82d-217124274fcd' class='xr-var-data-in' type='checkbox'><label for='data-1b9d7d39-4dd0-41e0-b82d-217124274fcd' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>units :</span></dt><dd>-</dd><dt><span>long_name :</span></dt><dd>Glacier external boundaries</dd></dl></div><div class='xr-var-data'><pre>[65286 values with dtype=int8]</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-ca62f094-691a-4bbf-afea-7809cfb39d8f' class='xr-section-summary-in' type='checkbox'  ><label for='section-ca62f094-691a-4bbf-afea-7809cfb39d8f' class='xr-section-summary' >Indexes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-40ab73c2-c086-4e21-9a30-a9d54a8bd8ce' class='xr-index-data-in' type='checkbox'/><label for='index-40ab73c2-c086-4e21-9a30-a9d54a8bd8ce' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([-6517.12890625, -6467.12890625, -6417.12890625, -6367.12890625,
       -6317.12890625, -6267.12890625, -6217.12890625, -6167.12890625,
       -6117.12890625, -6067.12890625,
       ...
        6932.87109375,  6982.87109375,  7032.87109375,  7082.87109375,
        7132.87109375,  7182.87109375,  7232.87109375,  7282.87109375,
        7332.87109375,  7382.87109375],
      dtype=&#x27;float32&#x27;, name=&#x27;x&#x27;, length=279))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>y</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-e75f119b-6e20-4b0d-b8ed-cb4451916e1b' class='xr-index-data-in' type='checkbox'/><label for='index-e75f119b-6e20-4b0d-b8ed-cb4451916e1b' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([5189040.5, 5188990.5, 5188940.5, 5188890.5, 5188840.5, 5188790.5,
       5188740.5, 5188690.5, 5188640.5, 5188590.5,
       ...
       5177840.5, 5177790.5, 5177740.5, 5177690.5, 5177640.5, 5177590.5,
       5177540.5, 5177490.5, 5177440.5, 5177390.5],
      dtype=&#x27;float32&#x27;, name=&#x27;y&#x27;, length=234))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-1fa51872-cbf0-4216-85c6-0c7c844f2cf6' class='xr-section-summary-in' type='checkbox'  checked><label for='section-1fa51872-cbf0-4216-85c6-0c7c844f2cf6' class='xr-section-summary' >Attributes: <span>(7)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>author :</span></dt><dd>OGGM</dd><dt><span>author_info :</span></dt><dd>Open Global Glacier Model</dd><dt><span>pyproj_srs :</span></dt><dd>+proj=tmerc +lat_0=0 +lon_0=10.7584 +k=0.9996 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs</dd><dt><span>max_h_dem :</span></dt><dd>3691.0</dd><dt><span>min_h_dem :</span></dt><dd>1936.0</dd><dt><span>max_h_glacier :</span></dt><dd>3691.0</dd><dt><span>min_h_glacier :</span></dt><dd>2431.0</dd></dl></div></li></ul></div></div></div></div>
</div>
<p>We also can plot individual variables with:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">topo</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.collections.QuadMesh at 0x72d079658a50&gt;
</pre></div>
</div>
<img alt="../_images/d95f04e5f8f7b0dcd729c4372ec4a329792c2ab0bcf2283170f6d6a8c0d17e97.png" src="../_images/d95f04e5f8f7b0dcd729c4372ec4a329792c2ab0bcf2283170f6d6a8c0d17e97.png" />
</div>
</div>
<div class="alert alert-warning">
    <b>Task</b>: Plot all the variables by adapting the line of code above, and try to explain what each of them is showing.
</div><p>Your answer here:</p>
</section>
<section id="elevation-band-flowline">
<h2>elevation band flowline<a class="headerlink" href="#elevation-band-flowline" title="Link to this heading">#</a></h2>
<p>Finally, we create our elevation band flowline:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">workflow</span><span class="o">.</span><span class="n">execute_entity_task</span><span class="p">(</span><span class="n">tasks</span><span class="o">.</span><span class="n">elevation_band_flowline</span><span class="p">,</span> 
                             <span class="n">gdirs</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-05-05 09:28:39: oggm.workflow: Execute entity tasks [elevation_band_flowline] on 1 glaciers
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-05-05 09:28:39: oggm.core.centerlines: (RGI60-11.00897) elevation_band_flowline
</pre></div>
</div>
</div>
</div>
<div class="alert alert-warning">
    <b>Task</b>: Have a look in your glacier's working directory. Is their a new file?
</div><p>You should see a new file called <code class="docutils literal notranslate"><span class="pre">elevation_band_flowline.csv</span></code>. Let’s have a look at it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="n">df_eb</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">gdir</span><span class="o">.</span><span class="n">get_filepath</span><span class="p">(</span><span class="s1">&#39;elevation_band_flowline&#39;</span><span class="p">))</span>
<span class="n">df_eb</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dis_along_flowline</th>
      <th>area</th>
      <th>mean_elevation</th>
      <th>slope</th>
      <th>bin_elevation</th>
      <th>dx</th>
      <th>width</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>58.782017</td>
      <td>45000.0</td>
      <td>3642.9340</td>
      <td>0.249848</td>
      <td>3645.0</td>
      <td>117.564030</td>
      <td>382.770127</td>
    </tr>
    <tr>
      <th>1</th>
      <td>145.106220</td>
      <td>42500.0</td>
      <td>3615.6875</td>
      <td>0.498703</td>
      <td>3615.0</td>
      <td>55.084373</td>
      <td>771.543676</td>
    </tr>
    <tr>
      <th>2</th>
      <td>197.212231</td>
      <td>35000.0</td>
      <td>3583.8884</td>
      <td>0.548217</td>
      <td>3585.0</td>
      <td>49.127650</td>
      <td>712.429744</td>
    </tr>
    <tr>
      <th>3</th>
      <td>245.276493</td>
      <td>20000.0</td>
      <td>3555.7450</td>
      <td>0.568096</td>
      <td>3555.0</td>
      <td>47.000877</td>
      <td>425.523971</td>
    </tr>
    <tr>
      <th>4</th>
      <td>289.617252</td>
      <td>20000.0</td>
      <td>3527.1010</td>
      <td>0.623864</td>
      <td>3525.0</td>
      <td>41.680637</td>
      <td>479.839112</td>
    </tr>
    <tr>
      <th>5</th>
      <td>331.036068</td>
      <td>25000.0</td>
      <td>3496.5723</td>
      <td>0.629870</td>
      <td>3495.0</td>
      <td>41.156994</td>
      <td>607.430175</td>
    </tr>
    <tr>
      <th>6</th>
      <td>389.333172</td>
      <td>52500.0</td>
      <td>3459.0107</td>
      <td>0.378506</td>
      <td>3465.0</td>
      <td>75.437210</td>
      <td>695.943023</td>
    </tr>
    <tr>
      <th>7</th>
      <td>461.008892</td>
      <td>90000.0</td>
      <td>3432.8930</td>
      <td>0.415958</td>
      <td>3435.0</td>
      <td>67.914240</td>
      <td>1325.200763</td>
    </tr>
    <tr>
      <th>8</th>
      <td>526.511395</td>
      <td>107500.0</td>
      <td>3405.7708</td>
      <td>0.443861</td>
      <td>3405.0</td>
      <td>63.090767</td>
      <td>1703.894330</td>
    </tr>
    <tr>
      <th>9</th>
      <td>592.245770</td>
      <td>162500.0</td>
      <td>3375.2360</td>
      <td>0.413449</td>
      <td>3375.0</td>
      <td>68.377980</td>
      <td>2376.495952</td>
    </tr>
    <tr>
      <th>10</th>
      <td>668.577389</td>
      <td>205000.0</td>
      <td>3343.8790</td>
      <td>0.341952</td>
      <td>3345.0</td>
      <td>84.285250</td>
      <td>2432.216851</td>
    </tr>
    <tr>
      <th>11</th>
      <td>758.103481</td>
      <td>285000.0</td>
      <td>3314.3928</td>
      <td>0.306585</td>
      <td>3315.0</td>
      <td>94.766945</td>
      <td>3007.377734</td>
    </tr>
    <tr>
      <th>12</th>
      <td>845.885151</td>
      <td>252500.0</td>
      <td>3284.8694</td>
      <td>0.355526</td>
      <td>3285.0</td>
      <td>80.796394</td>
      <td>3125.139457</td>
    </tr>
    <tr>
      <th>13</th>
      <td>926.429981</td>
      <td>292500.0</td>
      <td>3254.5012</td>
      <td>0.357569</td>
      <td>3255.0</td>
      <td>80.293274</td>
      <td>3642.895422</td>
    </tr>
    <tr>
      <th>14</th>
      <td>1006.486744</td>
      <td>300000.0</td>
      <td>3224.3972</td>
      <td>0.359511</td>
      <td>3225.0</td>
      <td>79.820260</td>
      <td>3758.444327</td>
    </tr>
    <tr>
      <th>15</th>
      <td>1087.316090</td>
      <td>335000.0</td>
      <td>3195.0374</td>
      <td>0.351365</td>
      <td>3195.0</td>
      <td>81.838440</td>
      <td>4093.430914</td>
    </tr>
    <tr>
      <th>16</th>
      <td>1172.968327</td>
      <td>377500.0</td>
      <td>3164.6990</td>
      <td>0.323540</td>
      <td>3165.0</td>
      <td>89.466034</td>
      <td>4219.478425</td>
    </tr>
    <tr>
      <th>17</th>
      <td>1267.020817</td>
      <td>425000.0</td>
      <td>3134.2840</td>
      <td>0.295250</td>
      <td>3135.0</td>
      <td>98.638940</td>
      <td>4308.643267</td>
    </tr>
    <tr>
      <th>18</th>
      <td>1372.525471</td>
      <td>467500.0</td>
      <td>3105.1190</td>
      <td>0.260890</td>
      <td>3105.0</td>
      <td>112.370370</td>
      <td>4160.349426</td>
    </tr>
    <tr>
      <th>19</th>
      <td>1482.238865</td>
      <td>422500.0</td>
      <td>3075.6772</td>
      <td>0.273218</td>
      <td>3075.0</td>
      <td>107.056420</td>
      <td>3946.517196</td>
    </tr>
    <tr>
      <th>20</th>
      <td>1592.067173</td>
      <td>375000.0</td>
      <td>3045.8667</td>
      <td>0.260381</td>
      <td>3045.0</td>
      <td>112.600204</td>
      <td>3330.366954</td>
    </tr>
    <tr>
      <th>21</th>
      <td>1696.459858</td>
      <td>330000.0</td>
      <td>3015.6990</td>
      <td>0.302337</td>
      <td>3015.0</td>
      <td>96.185160</td>
      <td>3430.882764</td>
    </tr>
    <tr>
      <th>22</th>
      <td>1800.976330</td>
      <td>315000.0</td>
      <td>2984.5376</td>
      <td>0.259835</td>
      <td>2985.0</td>
      <td>112.847786</td>
      <td>2791.370671</td>
    </tr>
    <tr>
      <th>23</th>
      <td>1940.315502</td>
      <td>297500.0</td>
      <td>2954.6850</td>
      <td>0.178972</td>
      <td>2955.0</td>
      <td>165.830550</td>
      <td>1793.999947</td>
    </tr>
    <tr>
      <th>24</th>
      <td>2129.448803</td>
      <td>280000.0</td>
      <td>2925.1640</td>
      <td>0.140291</td>
      <td>2925.0</td>
      <td>212.436040</td>
      <td>1318.043805</td>
    </tr>
    <tr>
      <th>25</th>
      <td>2380.564892</td>
      <td>272500.0</td>
      <td>2895.6414</td>
      <td>0.103154</td>
      <td>2895.0</td>
      <td>289.796140</td>
      <td>940.316174</td>
    </tr>
    <tr>
      <th>26</th>
      <td>2691.526684</td>
      <td>265000.0</td>
      <td>2864.5080</td>
      <td>0.090082</td>
      <td>2865.0</td>
      <td>332.127470</td>
      <td>797.886421</td>
    </tr>
    <tr>
      <th>27</th>
      <td>2940.803265</td>
      <td>175000.0</td>
      <td>2836.0950</td>
      <td>0.178345</td>
      <td>2835.0</td>
      <td>166.425700</td>
      <td>1051.520257</td>
    </tr>
    <tr>
      <th>28</th>
      <td>3121.247997</td>
      <td>210000.0</td>
      <td>2803.6301</td>
      <td>0.153064</td>
      <td>2805.0</td>
      <td>194.463750</td>
      <td>1079.892809</td>
    </tr>
    <tr>
      <th>29</th>
      <td>3368.845440</td>
      <td>217500.0</td>
      <td>2774.1938</td>
      <td>0.099428</td>
      <td>2775.0</td>
      <td>300.731140</td>
      <td>723.237374</td>
    </tr>
    <tr>
      <th>30</th>
      <td>3686.500713</td>
      <td>245000.0</td>
      <td>2745.8748</td>
      <td>0.089426</td>
      <td>2745.0</td>
      <td>334.579440</td>
      <td>732.262574</td>
    </tr>
    <tr>
      <th>31</th>
      <td>3989.860882</td>
      <td>205000.0</td>
      <td>2714.6838</td>
      <td>0.109794</td>
      <td>2715.0</td>
      <td>272.140870</td>
      <td>753.286343</td>
    </tr>
    <tr>
      <th>32</th>
      <td>4245.098095</td>
      <td>155000.0</td>
      <td>2685.8200</td>
      <td>0.125215</td>
      <td>2685.0</td>
      <td>238.333540</td>
      <td>650.349081</td>
    </tr>
    <tr>
      <th>33</th>
      <td>4477.138927</td>
      <td>145000.0</td>
      <td>2653.8193</td>
      <td>0.132117</td>
      <td>2655.0</td>
      <td>225.748110</td>
      <td>642.308816</td>
    </tr>
    <tr>
      <th>34</th>
      <td>4711.032787</td>
      <td>165000.0</td>
      <td>2625.1836</td>
      <td>0.123318</td>
      <td>2625.0</td>
      <td>242.039610</td>
      <td>681.706597</td>
    </tr>
    <tr>
      <th>35</th>
      <td>4938.058636</td>
      <td>135000.0</td>
      <td>2595.2520</td>
      <td>0.140568</td>
      <td>2595.0</td>
      <td>212.012070</td>
      <td>636.756201</td>
    </tr>
    <tr>
      <th>36</th>
      <td>5123.667995</td>
      <td>102500.0</td>
      <td>2565.9030</td>
      <td>0.186250</td>
      <td>2565.0</td>
      <td>159.206650</td>
      <td>643.817329</td>
    </tr>
    <tr>
      <th>37</th>
      <td>5265.556194</td>
      <td>67500.0</td>
      <td>2535.8093</td>
      <td>0.236329</td>
      <td>2535.0</td>
      <td>124.569756</td>
      <td>541.865076</td>
    </tr>
    <tr>
      <th>38</th>
      <td>5390.759350</td>
      <td>60000.0</td>
      <td>2505.1946</td>
      <td>0.234036</td>
      <td>2505.0</td>
      <td>125.836550</td>
      <td>476.809012</td>
    </tr>
    <tr>
      <th>39</th>
      <td>5519.941723</td>
      <td>47500.0</td>
      <td>2477.1929</td>
      <td>0.222615</td>
      <td>2475.0</td>
      <td>132.528200</td>
      <td>358.414289</td>
    </tr>
    <tr>
      <th>40</th>
      <td>5656.757748</td>
      <td>17500.0</td>
      <td>2453.4172</td>
      <td>0.209490</td>
      <td>2445.0</td>
      <td>141.103850</td>
      <td>124.022129</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="alert alert-warning">
    <b>Task</b>: What do the individual columns stand for?
</div><p>Your answer here:</p>
</section>
<section id="fixed-dx-elevation-band-flowline">
<h2>fixed dx elevation band flowline<a class="headerlink" href="#fixed-dx-elevation-band-flowline" title="Link to this heading">#</a></h2>
<p>As you can see above, the created flowline has non-uniform <code class="docutils literal notranslate"><span class="pre">dx</span></code> values. However, our dynamic flowline model requires constant <code class="docutils literal notranslate"><span class="pre">dx</span></code> values to work. Let’s fix that:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">workflow</span><span class="o">.</span><span class="n">execute_entity_task</span><span class="p">(</span><span class="n">tasks</span><span class="o">.</span><span class="n">fixed_dx_elevation_band_flowline</span><span class="p">,</span> 
                             <span class="n">gdirs</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-05-05 09:28:39: oggm.workflow: Execute entity tasks [fixed_dx_elevation_band_flowline] on 1 glaciers
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-05-05 09:28:39: oggm.core.centerlines: (RGI60-11.00897) fixed_dx_elevation_band_flowline
</pre></div>
</div>
</div>
</div>
<div class="alert alert-warning">
    <b>Task</b>: Have a look in your glacier's working directory. Is their a new file?
</div><p>You will notice that a new file called <code class="docutils literal notranslate"><span class="pre">inversion_flowlines.pkl</span></code> has appeared in your working directory. We will explain why it is named this way in session 04. For now, let’s just take a look at it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fl_inv</span> <span class="o">=</span> <span class="n">gdir</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s1">&#39;inversion_flowlines&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># with zero we select the first and only flowline, with centerlines also multiple flowlines are possible</span>
<span class="n">fl_inv</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;oggm.core.centerlines.Centerline at 0x72d0794f68d0&gt;
</pre></div>
</div>
</div>
</div>
<p>You can see that this is an <code class="docutils literal notranslate"><span class="pre">Centerline</span></code> object. Whenever you encounter a new object in Python, you can check its available methods and properties using the dir command:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">dir</span><span class="p">(</span><span class="n">fl_inv</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;__class__&#39;,
 &#39;__delattr__&#39;,
 &#39;__dict__&#39;,
 &#39;__dir__&#39;,
 &#39;__doc__&#39;,
 &#39;__eq__&#39;,
 &#39;__format__&#39;,
 &#39;__ge__&#39;,
 &#39;__getattribute__&#39;,
 &#39;__getstate__&#39;,
 &#39;__gt__&#39;,
 &#39;__hash__&#39;,
 &#39;__init__&#39;,
 &#39;__init_subclass__&#39;,
 &#39;__le__&#39;,
 &#39;__lt__&#39;,
 &#39;__module__&#39;,
 &#39;__ne__&#39;,
 &#39;__new__&#39;,
 &#39;__reduce__&#39;,
 &#39;__reduce_ex__&#39;,
 &#39;__repr__&#39;,
 &#39;__setattr__&#39;,
 &#39;__sizeof__&#39;,
 &#39;__slotnames__&#39;,
 &#39;__str__&#39;,
 &#39;__subclasshook__&#39;,
 &#39;__weakref__&#39;,
 &#39;_surface_h&#39;,
 &#39;_widths&#39;,
 &#39;apparent_mb&#39;,
 &#39;dis_on_line&#39;,
 &#39;dx&#39;,
 &#39;dx_meter&#39;,
 &#39;flows_to&#39;,
 &#39;flows_to_indice&#39;,
 &#39;flows_to_point&#39;,
 &#39;flux&#39;,
 &#39;flux_needs_correction&#39;,
 &#39;flux_out&#39;,
 &#39;geometrical_widths&#39;,
 &#39;head&#39;,
 &#39;inflow_indices&#39;,
 &#39;inflow_points&#39;,
 &#39;inflows&#39;,
 &#39;is_rectangular&#39;,
 &#39;is_trapezoid&#39;,
 &#39;line&#39;,
 &#39;map_dx&#39;,
 &#39;normals&#39;,
 &#39;nx&#39;,
 &#39;order&#39;,
 &#39;orig_head&#39;,
 &#39;reset_flux&#39;,
 &#39;rgi_id&#39;,
 &#39;set_apparent_mb&#39;,
 &#39;set_flows_to&#39;,
 &#39;set_line&#39;,
 &#39;surface_h&#39;,
 &#39;tail&#39;,
 &#39;widths&#39;,
 &#39;widths_m&#39;]
</pre></div>
</div>
</div>
</div>
<p>We can look at the spacing of the flowline with:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fl_inv</span><span class="o">.</span><span class="n">map_dx</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>50.0
</pre></div>
</div>
</div>
</div>
<p>This is the same spacing in meters as the grid defined in the previous notebook.</p>
<p>To get a better understanding of our flowline, let’s try to visualize it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.patches</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">patches</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="c1"># Plot setup</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="c1"># defint two axis</span>
<span class="n">ax_xz</span> <span class="o">=</span> <span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">ax_xy</span> <span class="o">=</span> <span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="c1"># define grid points in x direction</span>
<span class="n">distance_along_line_meter</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">fl_inv</span><span class="o">.</span><span class="n">nx</span><span class="p">)</span> <span class="o">*</span> <span class="n">fl_inv</span><span class="o">.</span><span class="n">dx</span> <span class="o">*</span> <span class="n">fl_inv</span><span class="o">.</span><span class="n">map_dx</span>

<span class="c1"># plot the surface height per grid point</span>
<span class="n">ax_xz</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">distance_along_line_meter</span><span class="p">,</span> <span class="n">fl_inv</span><span class="o">.</span><span class="n">surface_h</span><span class="p">,</span> <span class="s1">&#39;.-&#39;</span><span class="p">)</span>

<span class="c1"># plot the numeric gird per grid point</span>
<span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">width</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">distance_along_line_meter</span><span class="p">,</span> <span class="n">fl_inv</span><span class="o">.</span><span class="n">widths_m</span><span class="p">):</span>
    <span class="n">lower_left_y</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">width</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="n">rect</span> <span class="o">=</span> <span class="n">patches</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">lower_left_y</span><span class="p">),</span> <span class="n">fl_inv</span><span class="o">.</span><span class="n">dx_meter</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span>
                             <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;skyblue&#39;</span><span class="p">)</span>
    <span class="n">ax_xy</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>

<span class="c1"># define the axis limits</span>
<span class="n">ax_xy</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">distance_along_line_meter</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">fl_inv</span><span class="o">.</span><span class="n">dx_meter</span><span class="p">)</span>
<span class="n">ax_xz</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">distance_along_line_meter</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">fl_inv</span><span class="o">.</span><span class="n">dx_meter</span><span class="p">)</span>
<span class="n">ax_xy</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">-</span><span class="nb">max</span><span class="p">(</span><span class="n">fl_inv</span><span class="o">.</span><span class="n">widths_m</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span>
               <span class="nb">max</span><span class="p">(</span><span class="n">fl_inv</span><span class="o">.</span><span class="n">widths_m</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>

<span class="c1"># add labels to the axis</span>
<span class="n">ax_xz</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Height in m&#39;</span><span class="p">)</span>
<span class="n">ax_xy</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Width in m&#39;</span><span class="p">)</span>
<span class="n">ax_xy</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Distance along flowline in m&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/767b4549116acb43add41a59e5f7f08c40925a26ef8a61ca09f346dedd927d44.png" src="../_images/767b4549116acb43add41a59e5f7f08c40925a26ef8a61ca09f346dedd927d44.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">oggm</span><span class="w"> </span><span class="kn">import</span> <span class="n">graphics</span>
<span class="n">graphics</span><span class="o">.</span><span class="n">plot_domain</span><span class="p">(</span><span class="n">gdir</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/a247255013a63d082a642ef56b9465f745cd5cd853c56f63f8b7756e8818f132.png" src="../_images/a247255013a63d082a642ef56b9465f745cd5cd853c56f63f8b7756e8818f132.png" />
</div>
</div>
<div class="alert alert-warning">
    <b>Task</b>: Compare the flowline representation with the actual map view. Does it make sense?
</div><p>Your answer here:</p>
</section>
<section id="downstream-line">
<h2>Downstream line<a class="headerlink" href="#downstream-line" title="Link to this heading">#</a></h2>
<p>So far, we have only focused on the glacier as defined by its outline. But what happens if the glacier starts to grow? For that, we also need to define a downstream line:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">workflow</span><span class="o">.</span><span class="n">execute_entity_task</span><span class="p">(</span><span class="n">tasks</span><span class="o">.</span><span class="n">compute_downstream_line</span><span class="p">,</span>
                             <span class="n">gdirs</span><span class="p">);</span>
<span class="n">workflow</span><span class="o">.</span><span class="n">execute_entity_task</span><span class="p">(</span><span class="n">tasks</span><span class="o">.</span><span class="n">compute_downstream_bedshape</span><span class="p">,</span>
                             <span class="n">gdirs</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-05-05 09:28:39: oggm.workflow: Execute entity tasks [compute_downstream_line] on 1 glaciers
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-05-05 09:28:39: oggm.core.centerlines: (RGI60-11.00897) compute_downstream_line
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-05-05 09:28:40: oggm.workflow: Execute entity tasks [compute_downstream_bedshape] on 1 glaciers
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-05-05 09:28:40: oggm.core.centerlines: (RGI60-11.00897) compute_downstream_bedshape
</pre></div>
</div>
</div>
</div>
<div class="alert alert-warning">
    <b>Task</b>: Have a look in your glacier's working directory. Is their a new file?
</div><p>You’ll see that a new file called <code class="docutils literal notranslate"><span class="pre">downstream_line.pkl</span></code> has appeared in your working directory. Let’s take a look at it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dwn</span> <span class="o">=</span> <span class="n">gdir</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s1">&#39;downstream_line&#39;</span><span class="p">)</span>
<span class="n">dwn</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;full_line&#39;: None,
 &#39;downstream_line&#39;: &lt;LINESTRING (198 80, 199.414 78.586, 201.236 77.764, 203.057 76.943, 204.471...&gt;,
 &#39;bedshapes&#39;: array([0.00175559, 0.00182948, 0.00182114, 0.00190027, 0.00191281,
        0.00187244, 0.00180151, 0.00176664, 0.00167555, 0.00157336,
        0.00148882, 0.00143702, 0.00143408, 0.0014905 , 0.00156056,
        0.00168466, 0.0017831 , 0.00187688, 0.0019179 , 0.00193848,
        0.00188207, 0.00179669, 0.001698  , 0.00166098, 0.00164769,
        0.00165895, 0.0017144 , 0.00174694, 0.00175113, 0.0017223 ,
        0.00172459, 0.00172227, 0.0017408 , 0.00179838, 0.00187522,
        0.00191519, 0.00195211, 0.00197681, 0.00196096, 0.00195304,
        0.00195304, 0.00195304, 0.00195304, 0.00195304, 0.00195304,
        0.00195304, 0.00195304, 0.00195304, 0.00195304]),
 &#39;surface_h&#39;: array([2438.46057411, 2431.6336777 , 2424.00141571, 2418.21042777,
        2413.13438558, 2407.82282821, 2402.3426577 , 2397.01513784,
        2392.35993349, 2388.84528176, 2385.9002675 , 2382.15609605,
        2376.94614062, 2370.59916414, 2363.98741978, 2357.75310193,
        2351.64186518, 2345.31951186, 2339.41492639, 2334.43949962,
        2329.57920976, 2323.61210943, 2316.0256361 , 2307.76087792,
        2301.28405098, 2297.57666916, 2294.29098779, 2289.58094437,
        2284.12399938, 2278.81840508, 2273.15788243, 2266.84893151,
        2260.80622515, 2256.25252524, 2253.27785001, 2250.422777  ,
        2245.92100638, 2238.55027812, 2228.66016351, 2217.81602064,
        2207.4546392 , 2198.56242872, 2191.62739917, 2186.44483201,
        2180.93633375, 2173.1025582 , 2163.4484085 , 2154.50859269,
        2149.1083537 ]),
 &#39;w0s&#39;: array([194.35308448, 178.94149199, 187.11114347, 186.5701561 ,
        198.23743056, 176.15297029, 181.38005533, 207.96246557,
        207.04315546, 227.44396676, 211.3808288 , 223.00408939,
        228.57568252, 227.2589502 , 221.98517869, 208.18321584,
        201.63679989, 176.70406969, 195.21460997, 175.98639489,
        204.35951432, 205.63269446, 207.8920907 , 200.87702448,
        215.45391057, 212.81813084, 208.2338252 , 201.42711769,
        206.2476281 , 202.87034368, 205.15884793, 234.34305378,
        207.98165992, 198.6022925 , 200.75381904, 179.57803533,
        192.66065522, 175.58064125, 176.5449869 , 177.03155405,
        177.03155405, 177.03155405, 177.03155405, 177.03155405,
        177.03155405, 177.03155405, 177.03155405, 177.03155405,
        177.03155405])}
</pre></div>
</div>
</div>
</div>
<p>When you compare the <code class="docutils literal notranslate"><span class="pre">surface_h</span></code> values of the downstream line with those from the elevation band flowline above, you will see that they actually start where the flowline ends. Let’s plot them:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">))</span>

<span class="c1"># plot the elevation band flowline heights</span>
<span class="n">distance_along_flowline_meter</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">fl_inv</span><span class="o">.</span><span class="n">nx</span><span class="p">)</span> <span class="o">*</span> <span class="n">fl_inv</span><span class="o">.</span><span class="n">dx</span> <span class="o">*</span> <span class="n">fl_inv</span><span class="o">.</span><span class="n">map_dx</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">distance_along_flowline_meter</span><span class="p">,</span> <span class="n">fl_inv</span><span class="o">.</span><span class="n">surface_h</span><span class="p">,</span> <span class="s1">&#39;.-&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;elevation band flowline&#39;</span><span class="p">)</span>

<span class="c1"># we need to create x values for the downstream line, we start from the last elevation band flowline grid point</span>
<span class="n">last_eb_grid_point</span> <span class="o">=</span> <span class="n">distance_along_flowline_meter</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">downstream_x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">dwn</span><span class="p">[</span><span class="s1">&#39;surface_h&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">fl_inv</span><span class="o">.</span><span class="n">map_dx</span> <span class="o">*</span> <span class="n">fl_inv</span><span class="o">.</span><span class="n">dx</span> <span class="o">+</span> <span class="n">last_eb_grid_point</span>

<span class="c1"># plot the downstream heights</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">downstream_x</span><span class="p">,</span> <span class="n">dwn</span><span class="p">[</span><span class="s1">&#39;surface_h&#39;</span><span class="p">],</span> <span class="s1">&#39;.-&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;downstream line&#39;</span><span class="p">)</span>

<span class="c1"># add a legend</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="c1"># add axis labels</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Height in m&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Distance along flowline in m&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/906f633b32825e47eee2810d4d5d9c4e26fe78881fdbe87c184a95c0bbe9846f.png" src="../_images/906f633b32825e47eee2810d4d5d9c4e26fe78881fdbe87c184a95c0bbe9846f.png" />
</div>
</div>
<p>Additionally, the parameters <code class="docutils literal notranslate"><span class="pre">bedshapes</span></code> and <code class="docutils literal notranslate"><span class="pre">w0</span></code> define the shape of the downstream line. We’ll learn more about the different bed shapes in session 04.</p>
</section>
</section>
<section id="recap">
<h1>Recap<a class="headerlink" href="#recap" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>By default, OGGM uses elevation band flowlines.</p></li>
<li><p>These flowlines are created using the glacier outline and a Digital Elevation Model (DEM).</p></li>
<li><p>To allow glaciers to advance, we also defined a downstream line.</p></li>
</ul>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./session_02"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="numeric_domain_glacier.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Numeric 2D grid of a glacier directory</p>
      </div>
    </a>
    <a class="right-next"
       href="../session_03/topic.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">StudiKickoff: Mass balance model</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Glacier Flowlines</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#oggm-initzial-set-up">OGGM initzial set up</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#start-from-a-preprocessed-directory">Start from a preprocessed directory</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#create-elevation-band-flowlines">Create elevation band flowlines</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#glacier-mask">Glacier Mask</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#elevation-band-flowline">elevation band flowline</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#fixed-dx-elevation-band-flowline">fixed dx elevation band flowline</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#downstream-line">Downstream line</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#recap">Recap</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Patrick Schmitt
</p>

  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    <p class="last-updated">
  Last updated on May 05, 2025.
  <br/>
</p>
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <p>
<a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">
  <img align="right" class="margin" src="https://mirrors.creativecommons.org/presskit/buttons/88x31/svg/by.svg" width="88px">
</a>
These lecture notes and exercises are licensed under a <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">Creative Commons Attribution 4.0 International (CC BY 4.0) license</a>.
<br>
&copy; Copyright 2025.
</p>

</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>